{% extends 'base_dashboard.html' %}
{% load static %}

{% block title %}
    {% if form.instance.id %}Modificar{% else %}Nuevo{% endif %} establecimiento - micartadigital.es
{% endblock %}

{% block content %}
<h1>{% if form.instance.id %}Modificar{% else %}Nuevo{% endif %} establecimiento</h1>

<form class="ui form" method="POST" novalidate enctype="multipart/form-data">
    {% csrf_token %}
    
    <div class="{% if form.imagen.errors %}error {% endif %}field">
        <label>Imagen de portada:</label>
        <div id="header-pic" class="ui segment">
            <div class="ui dimmer">
                <div class="content">
                    <h2 class="ui inverted header">Imagen de portada</h2>
                    <div id="imagen-change-btn" class="ui button">Cambiar</div>
                    <div id="imagen-clear-btn" class="ui button">Eliminar</div>
                </div>
            </div>
            {% if form.instance.pk and form.instance.imagen %}
            <img class="ui fluid image" src="{{ form.instance.imagen.url }}" />
            {% else %}
            <img class="ui fluid image" src="https://i.stack.imgur.com/y9DpT.jpg" />
            {% endif %}
        </div>
        {% for error in form.imagen.errors %}
            <small class="helper">{{ error }}</small>
        {% endfor %}
    </div>

    {% include 'includes/form.html' %}
    <button type="submit" class="ui primary button">
        {% if form.instance.id %}Modificar{% else %}Crear{% endif %}
    </button>
</form>
{% endblock %}

{% block script %}
<script src="{% static 'js/establecimiento-form.js' %}"></script>
{% endblock %}